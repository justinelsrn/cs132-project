var rq1_data = [{
  type: "sunburst",
  'branchvalues': 'total',
  'hovertemplate': 'Reports: %{value}',
  'ids': ['civilians/abu sayyaf', 'drug suspects/anti-drug vigilantes',
  'government/anti-drug vigilantes', 'labor group/anti-drug vigilantes',
  'civilians/armed drug suspects', 'drug suspects/armed drug suspects',
  'labor group/armed drug suspects', 'civilians/armed group',
  'farmers/armed group', 'government/armed group',
  'labor group/armed group',
  'civilians/bangsamoro islamic freedom fighters',
  'farmers/bangsamoro islamic freedom fighters', 'civilians/clan militia',
  'farmers/clan militia', 'civilians/military forces',
  'farmers/military forces', 'labor group/military forces',
  "civilians/new people's army", "farmers/new people's army",
  "government/new people's army", "labor group/new people's army",
  'civilians/others', 'drug suspects/others', 'farmers/others',
  'government/others', 'labor group/others', 'civilians/police forces',
  'drug suspects/police forces', 'farmers/police forces',
  'government/police forces', 'labor group/police forces', 'civilians',
  'drug suspects', 'farmers', 'government', 'labor group'],
'labels': ['abu sayyaf', 'anti-drug vigilantes', 'anti-drug vigilantes',
     'anti-drug vigilantes', 'armed drug suspects', 'armed drug suspects',
     'armed drug suspects', 'armed group', 'armed group', 'armed group',
     'armed group', 'bangsamoro islamic freedom fighters',
     'bangsamoro islamic freedom fighters', 'clan militia', 'clan militia',
     'military forces', 'military forces', 'military forces',
     "new people's army", "new people's army", "new people's army",
     "new people's army", 'others', 'others', 'others', 'others', 'others',
     'police forces', 'police forces', 'police forces', 'police forces',
     'police forces', 'civilians', 'drug suspects', 'farmers', 'government',
     'labor group'],
'opacity': 1,
'marker': {'colors': ["#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d",
          "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d",
          "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d",
          "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d",
          "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d", "#e7717d",
          "#e7717d", "#e7717d", "#afd275", "#afd275", "#afd275", "#afd275",
          "#afd275"]},
'name': '',
'parents': ['civilians', 'drug suspects', 'government', 'labor group', 'civilians',
      'drug suspects', 'labor group', 'civilians', 'farmers', 'government',
      'labor group', 'civilians', 'farmers', 'civilians', 'farmers',
      'civilians', 'farmers', 'labor group', 'civilians', 'farmers',
      'government', 'labor group', 'civilians', 'drug suspects', 'farmers',
      'government', 'labor group', 'civilians', 'drug suspects', 'farmers',
      'government', 'labor group', '', '', '', '', ''],
'values': [  12, 2287,  102,    6,   39,   91,    2,  355,   55,  811,   36,   15,
        4,   10,    4,   14,  128,   17,  128,   40,   45,    9,   37,   30,
       12,   51,    5,   30, 3542,   19,   61,    4,  640, 5950,  262, 1070,
       79], 
  outsidetextfont: {size: 20, color: "#377eb8"},
  leaf: {opacity: 0.5},
//   marker: {line: {width: 2}},
}];




var rq1_layout = {
  autosize: false,
  margin: {l: 0, r: 0, b: 0, t: 100},
  width: 800,
  height: 500,
  title: {
    text: "Top 5 At-risk Filipino Groups and Their Offenders:<br>Reported Fatal Cases of Civilian Victimization",
    'xanchor': 'center',
    'yanchor': 'top',
    y: 0.90,
    // automargin: true,
  },
  annotations: [
    {
      x: 0.85,
      y: 0.6,
      font: {color: "#e7717d"},
      xref: 'paper',
      yref: 'paper',
      text: 'Offenders',
      xanchor:'left',
      showarrow: false,
      arrowhead: 7,
    },
    {
    font: {color: "#e7717d"},
    x:0.8,
    y:0.6,
    showarrow:false,
    text:"AB",
    textangle:0,
    xanchor:'left',
    xref:"paper",
    yref:"paper",
    bgcolor:"#e7717d"
    },
    {
        x: 0.85,
        y: 0.7,
        font: {color: "#afd275"},
        xref: 'paper',
        yref: 'paper',
        text: 'Victims',
        xanchor:'left',
        showarrow: false,
        arrowhead: 7,
      },
      {
      font: {color: "#afd275"},
      x:0.8,
      y:0.7,
      showarrow:false,
      text:"AB",
      textangle:0,
      xanchor:'left',
      xref:"paper",
      yref:"paper",
      bgcolor:"#afd275"
      }
  ]
//   annotations: [
//     {
//         color: "#e7717d",
//         x: 0.75,
//         y: 0.8,
//         showarrow: False,
//         text: "Offenders",
//         // textangle: 0,
//         // xanchor: 'left',
//         // xref: "paper",
//         // yref: "paper"
//     }
//   ]
};

var rq2_data = [{
    type: 'scatter',
    'hovertemplate': 'date=%{x}<br>reports=%{y}<extra></extra>',
    'legendgroup': '',
    'line': {'color': '#e7717d', 'dash': 'solid'},
    'marker': {'symbol': 'circle'},
    'mode': 'lines',
    'name': '',
    'orientation': 'v',
    'showlegend': false,
    'x': [new Date("2016-01-01"),
    new Date("2016-02-01"),
    new Date("2016-03-01"),
    new Date("2016-04-01"),
    new Date("2016-05-01"),
    new Date("2016-06-01"),
    new Date("2016-07-01"),
    new Date("2016-08-01"),
    new Date("2016-09-01"),
    new Date("2016-10-01"),
    new Date("2016-11-01"),
    new Date("2016-12-01"),
    new Date("2017-01-01"),
    new Date("2017-02-01"),
    new Date("2017-03-01"),
    new Date("2017-04-01"),
    new Date("2017-05-01"),
    new Date("2017-06-01"),
    new Date("2017-07-01"),
    new Date("2017-08-01"),
    new Date("2017-09-01"),
    new Date("2017-10-01"),
    new Date("2017-11-01"),
    new Date("2017-12-01"),
    new Date("2018-01-01"),
    new Date("2018-02-01"),
    new Date("2018-03-01"),
    new Date("2018-04-01"),
    new Date("2018-05-01"),
    new Date("2018-06-01"),
    new Date("2018-07-01"),
    new Date("2018-08-01"),
    new Date("2018-09-01"),
    new Date("2018-10-01"),
    new Date("2018-11-01"),
    new Date("2018-12-01"),
    new Date("2019-01-01"),
    new Date("2019-02-01"),
    new Date("2019-03-01"),
    new Date("2019-04-01"),
    new Date("2019-05-01"),
    new Date("2019-06-01"),
    new Date("2019-07-01"),
    new Date("2019-08-01"),
    new Date("2019-09-01"),
    new Date("2019-10-01"),
    new Date("2019-11-01"),
    new Date("2019-12-01"),
    new Date("2020-01-01"),
    new Date("2020-02-01"),
    new Date("2020-03-01"),
    new Date("2020-04-01"),
    new Date("2020-05-01"),
    new Date("2020-06-01"),
    new Date("2020-07-01"),
    new Date("2020-08-01"),
    new Date("2020-09-01"),
    new Date("2020-10-01"),
    new Date("2020-11-01"),
    new Date("2020-12-01"),
    new Date("2021-01-01"),
    new Date("2021-02-01"),
    new Date("2021-03-01"),
    new Date("2021-04-01"),
    new Date("2021-05-01"),
    new Date("2021-06-01"),
    new Date("2021-07-01"),
    new Date("2021-08-01"),
    new Date("2021-09-01"),
    new Date("2021-10-01"),
    new Date("2021-11-01"),
    new Date("2021-12-01"),
    new Date("2022-01-01"),
    new Date("2022-02-01"),
    new Date("2022-03-01"),
    new Date("2022-04-01"),
    new Date("2022-05-01"),
    new Date("2022-06-01"),
    new Date("2022-07-01"),
    new Date("2022-08-01"),
    new Date("2022-09-01"),
    new Date("2022-10-01"),
    new Date("2022-11-01"),
    new Date("2022-12-01"),
    new Date("2023-01-01"),
    new Date("2023-02-01"),
    new Date("2023-03-01"),
    new Date("2023-04-01"),
    new Date("2023-05-01"),
    new Date("2023-06-01"),
    new Date("2023-07-01"),
    new Date("2023-08-01"),
    new Date("2023-09-01"),
    new Date("2023-10-01"),
    new Date("2023-11-01"),
    new Date("2023-12-01"),
    new Date("2024-01-01"),
    new Date("2024-02-01"),
    new Date("2024-03-01"),
    new Date("2024-04-01"),
    new Date("2024-05-01")],
    'xaxis': 'x',
    'y': [  5,   7,   6,   5,  13,  12, 642, 464, 420, 316, 301, 190, 204,  94,
                135, 164, 215, 199, 175, 254, 144,  93,  48,  66,  63,  60,  95,  75,
                121, 131, 102, 165,  97, 112, 104,  79,  74,  64,  83,  74,  85,  90,
                 95, 132, 115,  82,  56,  65,  97,  94,  64,  55,  76,  70,  69,  56,
                 52,  49,  43,  68,  87,  72,  52,  56,  77,  61,  38,  27,  25,  28,
                 22,  26,  28,  30,  33,  29,  58,  52,  44,  40,  32,  35,  46,  22,
                 41,  33,  25,  47,  36,  31,  28,  35,  42,  44,  39,  24,  32,  20,
                 37,  20,  12],
    'yaxis': 'y'
}]

peak_data = [{'month': 7, 'date': new Date('2016-07-01 00:00:00'), 'reports': 642, 'year': 2016},
                {'month': 8, 'date': new Date('2017-08-01 00:00:00'), 'reports': 254, 'year': 2017},
                {'month': 8, 'date': new Date('2018-08-01 00:00:00'), 'reports': 165, 'year': 2018},
                {'month': 8, 'date': new Date('2019-08-01 00:00:00'), 'reports': 132, 'year': 2019},
                {'month': 1, 'date': new Date('2020-01-01 00:00:00'), 'reports': 97, 'year': 2020},
                {'month': 1, 'date': new Date('2021-01-01 00:00:00'), 'reports': 87, 'year': 2021},
                {'month': 5, 'date': new Date('2022-05-01 00:00:00'), 'reports': 58, 'year': 2022},
                {'month': 4, 'date': new Date('2023-04-01 00:00:00'), 'reports': 47, 'year': 2023},
                {'month': 3, 'date': new Date('2024-03-01 00:00:00'), 'reports': 37, 'year': 2024}]
let rq2_shapes = []
let rq2_annotations = []
const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];

for (let p of peak_data) {
    rq2_shapes.push({
        type: "line",
        x0: p['date'], y0: 0, x1: p['date'], y1: p['reports'],
        line: {        
            color: "#afd275",
            width: 2,
            dash: "dash"
            }
    });

    rq2_annotations.push({
        x :  p['date'],
        y :  p['reports'],
        text: `<b>${months[p['date'].getMonth()]}<br>${p['date'].getFullYear()}</b>`,
        // text :  `<b>{pd.to_datetime(x_date).strftime('%b<br>%Y')}</b>`,
        showarrow: true,
        arrowhead: 2,
        ax: 0,
        ay: -30,
    })
};


var rq2_layout = {
    autosize: true,
    // margin: {l: 0, r: 0, b: 0, t: 100},
    // width: 800,
    // height: 500,
    title: {
      text: "Aggregated Monthly Reports of Civilian Victimization with Peaks",
      'xanchor': 'center',
      'yanchor': 'top',
      y: 0.90,
      // automargin: true,
    },
    annotations: rq2_annotations,
    shapes: rq2_shapes
  };

Plotly.newPlot('rq1-plot', rq1_data, rq1_layout);

Plotly.newPlot('rq2-plot', rq2_data, rq2_layout);
