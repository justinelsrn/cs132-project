
rq2_customdata = ['<BR><b>Total Reports: </b> 5<BR><b>Fatal Reports:</b> 3<BR><b>Fatality Rate:</b> 60.0%',
  '<BR><b>Total Reports: </b> 7<BR><b>Fatal Reports:</b> 5<BR><b>Fatality Rate:</b> 71.43%',
  '<BR><b>Total Reports: </b> 6<BR><b>Fatal Reports:</b> 5<BR><b>Fatality Rate:</b> 83.33%',
  '<BR><b>Total Reports: </b> 5<BR><b>Fatal Reports:</b> 4<BR><b>Fatality Rate:</b> 80.0%',
  '<BR><b>Total Reports: </b> 13<BR><b>Fatal Reports:</b> 8<BR><b>Fatality Rate:</b> 61.54%',
  '<BR><b>Total Reports: </b> 12<BR><b>Fatal Reports:</b> 9<BR><b>Fatality Rate:</b> 75.0%',
  '<BR><b>Total Reports: </b> 642<BR><b>Fatal Reports:</b> 627<BR><b>Fatality Rate:</b> 97.66%',
  '<BR><b>Total Reports: </b> 464<BR><b>Fatal Reports:</b> 450<BR><b>Fatality Rate:</b> 96.98%',
  '<BR><b>Total Reports: </b> 420<BR><b>Fatal Reports:</b> 406<BR><b>Fatality Rate:</b> 96.67%',
  '<BR><b>Total Reports: </b> 316<BR><b>Fatal Reports:</b> 314<BR><b>Fatality Rate:</b> 99.37%',
  '<BR><b>Total Reports: </b> 301<BR><b>Fatal Reports:</b> 292<BR><b>Fatality Rate:</b> 97.01%',
  '<BR><b>Total Reports: </b> 190<BR><b>Fatal Reports:</b> 181<BR><b>Fatality Rate:</b> 95.26%',
  '<BR><b>Total Reports: </b> 204<BR><b>Fatal Reports:</b> 196<BR><b>Fatality Rate:</b> 96.08%',
  '<BR><b>Total Reports: </b> 94<BR><b>Fatal Reports:</b> 85<BR><b>Fatality Rate:</b> 90.43%',
  '<BR><b>Total Reports: </b> 135<BR><b>Fatal Reports:</b> 127<BR><b>Fatality Rate:</b> 94.07%',
  '<BR><b>Total Reports: </b> 164<BR><b>Fatal Reports:</b> 156<BR><b>Fatality Rate:</b> 95.12%',
  '<BR><b>Total Reports: </b> 215<BR><b>Fatal Reports:</b> 207<BR><b>Fatality Rate:</b> 96.28%',
  '<BR><b>Total Reports: </b> 199<BR><b>Fatal Reports:</b> 187<BR><b>Fatality Rate:</b> 93.97%',
  '<BR><b>Total Reports: </b> 175<BR><b>Fatal Reports:</b> 161<BR><b>Fatality Rate:</b> 92.0%',
  '<BR><b>Total Reports: </b> 254<BR><b>Fatal Reports:</b> 239<BR><b>Fatality Rate:</b> 94.09%',
  '<BR><b>Total Reports: </b> 144<BR><b>Fatal Reports:</b> 132<BR><b>Fatality Rate:</b> 91.67%',
  '<BR><b>Total Reports: </b> 93<BR><b>Fatal Reports:</b> 89<BR><b>Fatality Rate:</b> 95.7%',
  '<BR><b>Total Reports: </b> 48<BR><b>Fatal Reports:</b> 39<BR><b>Fatality Rate:</b> 81.25%',
  '<BR><b>Total Reports: </b> 66<BR><b>Fatal Reports:</b> 60<BR><b>Fatality Rate:</b> 90.91%',
  '<BR><b>Total Reports: </b> 63<BR><b>Fatal Reports:</b> 60<BR><b>Fatality Rate:</b> 95.24%',
  '<BR><b>Total Reports: </b> 60<BR><b>Fatal Reports:</b> 52<BR><b>Fatality Rate:</b> 86.67%',
  '<BR><b>Total Reports: </b> 95<BR><b>Fatal Reports:</b> 85<BR><b>Fatality Rate:</b> 89.47%',
  '<BR><b>Total Reports: </b> 75<BR><b>Fatal Reports:</b> 67<BR><b>Fatality Rate:</b> 89.33%',
  '<BR><b>Total Reports: </b> 121<BR><b>Fatal Reports:</b> 112<BR><b>Fatality Rate:</b> 92.56%',
  '<BR><b>Total Reports: </b> 131<BR><b>Fatal Reports:</b> 121<BR><b>Fatality Rate:</b> 92.37%',
  '<BR><b>Total Reports: </b> 102<BR><b>Fatal Reports:</b> 96<BR><b>Fatality Rate:</b> 94.12%',
  '<BR><b>Total Reports: </b> 165<BR><b>Fatal Reports:</b> 161<BR><b>Fatality Rate:</b> 97.58%',
  '<BR><b>Total Reports: </b> 97<BR><b>Fatal Reports:</b> 93<BR><b>Fatality Rate:</b> 95.88%',
  '<BR><b>Total Reports: </b> 112<BR><b>Fatal Reports:</b> 103<BR><b>Fatality Rate:</b> 91.96%',
  '<BR><b>Total Reports: </b> 104<BR><b>Fatal Reports:</b> 92<BR><b>Fatality Rate:</b> 88.46%',
  '<BR><b>Total Reports: </b> 79<BR><b>Fatal Reports:</b> 74<BR><b>Fatality Rate:</b> 93.67%',
  '<BR><b>Total Reports: </b> 74<BR><b>Fatal Reports:</b> 72<BR><b>Fatality Rate:</b> 97.3%',
  '<BR><b>Total Reports: </b> 64<BR><b>Fatal Reports:</b> 59<BR><b>Fatality Rate:</b> 92.19%',
  '<BR><b>Total Reports: </b> 83<BR><b>Fatal Reports:</b> 78<BR><b>Fatality Rate:</b> 93.98%',
  '<BR><b>Total Reports: </b> 74<BR><b>Fatal Reports:</b> 62<BR><b>Fatality Rate:</b> 83.78%',
  '<BR><b>Total Reports: </b> 85<BR><b>Fatal Reports:</b> 70<BR><b>Fatality Rate:</b> 82.35%',
  '<BR><b>Total Reports: </b> 90<BR><b>Fatal Reports:</b> 83<BR><b>Fatality Rate:</b> 92.22%',
  '<BR><b>Total Reports: </b> 95<BR><b>Fatal Reports:</b> 92<BR><b>Fatality Rate:</b> 96.84%',
  '<BR><b>Total Reports: </b> 132<BR><b>Fatal Reports:</b> 119<BR><b>Fatality Rate:</b> 90.15%',
  '<BR><b>Total Reports: </b> 115<BR><b>Fatal Reports:</b> 101<BR><b>Fatality Rate:</b> 87.83%',
  '<BR><b>Total Reports: </b> 82<BR><b>Fatal Reports:</b> 73<BR><b>Fatality Rate:</b> 89.02%',
  '<BR><b>Total Reports: </b> 56<BR><b>Fatal Reports:</b> 49<BR><b>Fatality Rate:</b> 87.5%',
  '<BR><b>Total Reports: </b> 65<BR><b>Fatal Reports:</b> 56<BR><b>Fatality Rate:</b> 86.15%',
  '<BR><b>Total Reports: </b> 97<BR><b>Fatal Reports:</b> 95<BR><b>Fatality Rate:</b> 97.94%',
  '<BR><b>Total Reports: </b> 94<BR><b>Fatal Reports:</b> 87<BR><b>Fatality Rate:</b> 92.55%',
  '<BR><b>Total Reports: </b> 64<BR><b>Fatal Reports:</b> 56<BR><b>Fatality Rate:</b> 87.5%',
  '<BR><b>Total Reports: </b> 55<BR><b>Fatal Reports:</b> 53<BR><b>Fatality Rate:</b> 96.36%',
  '<BR><b>Total Reports: </b> 76<BR><b>Fatal Reports:</b> 73<BR><b>Fatality Rate:</b> 96.05%',
  '<BR><b>Total Reports: </b> 70<BR><b>Fatal Reports:</b> 64<BR><b>Fatality Rate:</b> 91.43%',
  '<BR><b>Total Reports: </b> 69<BR><b>Fatal Reports:</b> 63<BR><b>Fatality Rate:</b> 91.3%',
  '<BR><b>Total Reports: </b> 56<BR><b>Fatal Reports:</b> 49<BR><b>Fatality Rate:</b> 87.5%',
  '<BR><b>Total Reports: </b> 52<BR><b>Fatal Reports:</b> 43<BR><b>Fatality Rate:</b> 82.69%',
  '<BR><b>Total Reports: </b> 49<BR><b>Fatal Reports:</b> 46<BR><b>Fatality Rate:</b> 93.88%',
  '<BR><b>Total Reports: </b> 43<BR><b>Fatal Reports:</b> 42<BR><b>Fatality Rate:</b> 97.67%',
  '<BR><b>Total Reports: </b> 68<BR><b>Fatal Reports:</b> 65<BR><b>Fatality Rate:</b> 95.59%',
  '<BR><b>Total Reports: </b> 87<BR><b>Fatal Reports:</b> 82<BR><b>Fatality Rate:</b> 94.25%',
  '<BR><b>Total Reports: </b> 72<BR><b>Fatal Reports:</b> 67<BR><b>Fatality Rate:</b> 93.06%',
  '<BR><b>Total Reports: </b> 52<BR><b>Fatal Reports:</b> 48<BR><b>Fatality Rate:</b> 92.31%',
  '<BR><b>Total Reports: </b> 56<BR><b>Fatal Reports:</b> 49<BR><b>Fatality Rate:</b> 87.5%',
  '<BR><b>Total Reports: </b> 77<BR><b>Fatal Reports:</b> 74<BR><b>Fatality Rate:</b> 96.1%',
  '<BR><b>Total Reports: </b> 61<BR><b>Fatal Reports:</b> 57<BR><b>Fatality Rate:</b> 93.44%',
  '<BR><b>Total Reports: </b> 38<BR><b>Fatal Reports:</b> 34<BR><b>Fatality Rate:</b> 89.47%',
  '<BR><b>Total Reports: </b> 27<BR><b>Fatal Reports:</b> 26<BR><b>Fatality Rate:</b> 96.3%',
  '<BR><b>Total Reports: </b> 25<BR><b>Fatal Reports:</b> 24<BR><b>Fatality Rate:</b> 96.0%',
  '<BR><b>Total Reports: </b> 28<BR><b>Fatal Reports:</b> 22<BR><b>Fatality Rate:</b> 78.57%',
  '<BR><b>Total Reports: </b> 22<BR><b>Fatal Reports:</b> 20<BR><b>Fatality Rate:</b> 90.91%',
  '<BR><b>Total Reports: </b> 26<BR><b>Fatal Reports:</b> 23<BR><b>Fatality Rate:</b> 88.46%',
  '<BR><b>Total Reports: </b> 28<BR><b>Fatal Reports:</b> 24<BR><b>Fatality Rate:</b> 85.71%',
  '<BR><b>Total Reports: </b> 30<BR><b>Fatal Reports:</b> 27<BR><b>Fatality Rate:</b> 90.0%',
  '<BR><b>Total Reports: </b> 33<BR><b>Fatal Reports:</b> 24<BR><b>Fatality Rate:</b> 72.73%',
  '<BR><b>Total Reports: </b> 29<BR><b>Fatal Reports:</b> 26<BR><b>Fatality Rate:</b> 89.66%',
  '<BR><b>Total Reports: </b> 58<BR><b>Fatal Reports:</b> 34<BR><b>Fatality Rate:</b> 58.62%',
  '<BR><b>Total Reports: </b> 52<BR><b>Fatal Reports:</b> 49<BR><b>Fatality Rate:</b> 94.23%',
  '<BR><b>Total Reports: </b> 44<BR><b>Fatal Reports:</b> 40<BR><b>Fatality Rate:</b> 90.91%',
  '<BR><b>Total Reports: </b> 40<BR><b>Fatal Reports:</b> 33<BR><b>Fatality Rate:</b> 82.5%',
  '<BR><b>Total Reports: </b> 32<BR><b>Fatal Reports:</b> 25<BR><b>Fatality Rate:</b> 78.12%',
  '<BR><b>Total Reports: </b> 35<BR><b>Fatal Reports:</b> 29<BR><b>Fatality Rate:</b> 82.86%',
  '<BR><b>Total Reports: </b> 46<BR><b>Fatal Reports:</b> 40<BR><b>Fatality Rate:</b> 86.96%',
  '<BR><b>Total Reports: </b> 22<BR><b>Fatal Reports:</b> 19<BR><b>Fatality Rate:</b> 86.36%',
  '<BR><b>Total Reports: </b> 41<BR><b>Fatal Reports:</b> 35<BR><b>Fatality Rate:</b> 85.37%',
  '<BR><b>Total Reports: </b> 33<BR><b>Fatal Reports:</b> 28<BR><b>Fatality Rate:</b> 84.85%',
  '<BR><b>Total Reports: </b> 25<BR><b>Fatal Reports:</b> 21<BR><b>Fatality Rate:</b> 84.0%',
  '<BR><b>Total Reports: </b> 47<BR><b>Fatal Reports:</b> 38<BR><b>Fatality Rate:</b> 80.85%',
  '<BR><b>Total Reports: </b> 36<BR><b>Fatal Reports:</b> 32<BR><b>Fatality Rate:</b> 88.89%',
  '<BR><b>Total Reports: </b> 31<BR><b>Fatal Reports:</b> 27<BR><b>Fatality Rate:</b> 87.1%',
  '<BR><b>Total Reports: </b> 28<BR><b>Fatal Reports:</b> 24<BR><b>Fatality Rate:</b> 85.71%',
  '<BR><b>Total Reports: </b> 35<BR><b>Fatal Reports:</b> 28<BR><b>Fatality Rate:</b> 80.0%',
  '<BR><b>Total Reports: </b> 42<BR><b>Fatal Reports:</b> 32<BR><b>Fatality Rate:</b> 76.19%',
  '<BR><b>Total Reports: </b> 44<BR><b>Fatal Reports:</b> 33<BR><b>Fatality Rate:</b> 75.0%',
  '<BR><b>Total Reports: </b> 39<BR><b>Fatal Reports:</b> 34<BR><b>Fatality Rate:</b> 87.18%',
  '<BR><b>Total Reports: </b> 24<BR><b>Fatal Reports:</b> 20<BR><b>Fatality Rate:</b> 83.33%',
  '<BR><b>Total Reports: </b> 32<BR><b>Fatal Reports:</b> 29<BR><b>Fatality Rate:</b> 90.62%',
  '<BR><b>Total Reports: </b> 20<BR><b>Fatal Reports:</b> 17<BR><b>Fatality Rate:</b> 85.0%',
  '<BR><b>Total Reports: </b> 37<BR><b>Fatal Reports:</b> 31<BR><b>Fatality Rate:</b> 83.78%',
  '<BR><b>Total Reports: </b> 20<BR><b>Fatal Reports:</b> 19<BR><b>Fatality Rate:</b> 95.0%',
  '<BR><b>Total Reports: </b> 12<BR><b>Fatal Reports:</b> 12<BR><b>Fatality Rate:</b> 100.0%']


var rq2_data = [{
    type: 'scatter',
    'hovertemplate': 'date=%{x}<br>reports=%{y}<extra></extra>',
    'legendgroup': '',
    'line': {'color': '#e7717d', 'dash': 'solid'},
    'marker': {'symbol': 'circle'},
    'mode': 'lines',
    'name': '',
    'orientation': 'v',
    'showlegend': false,
    'x': [new Date("2016-01-01"),
    new Date("2016-02-01"),
    new Date("2016-03-01"),
    new Date("2016-04-01"),
    new Date("2016-05-01"),
    new Date("2016-06-01"),
    new Date("2016-07-01"),
    new Date("2016-08-01"),
    new Date("2016-09-01"),
    new Date("2016-10-01"),
    new Date("2016-11-01"),
    new Date("2016-12-01"),
    new Date("2017-01-01"),
    new Date("2017-02-01"),
    new Date("2017-03-01"),
    new Date("2017-04-01"),
    new Date("2017-05-01"),
    new Date("2017-06-01"),
    new Date("2017-07-01"),
    new Date("2017-08-01"),
    new Date("2017-09-01"),
    new Date("2017-10-01"),
    new Date("2017-11-01"),
    new Date("2017-12-01"),
    new Date("2018-01-01"),
    new Date("2018-02-01"),
    new Date("2018-03-01"),
    new Date("2018-04-01"),
    new Date("2018-05-01"),
    new Date("2018-06-01"),
    new Date("2018-07-01"),
    new Date("2018-08-01"),
    new Date("2018-09-01"),
    new Date("2018-10-01"),
    new Date("2018-11-01"),
    new Date("2018-12-01"),
    new Date("2019-01-01"),
    new Date("2019-02-01"),
    new Date("2019-03-01"),
    new Date("2019-04-01"),
    new Date("2019-05-01"),
    new Date("2019-06-01"),
    new Date("2019-07-01"),
    new Date("2019-08-01"),
    new Date("2019-09-01"),
    new Date("2019-10-01"),
    new Date("2019-11-01"),
    new Date("2019-12-01"),
    new Date("2020-01-01"),
    new Date("2020-02-01"),
    new Date("2020-03-01"),
    new Date("2020-04-01"),
    new Date("2020-05-01"),
    new Date("2020-06-01"),
    new Date("2020-07-01"),
    new Date("2020-08-01"),
    new Date("2020-09-01"),
    new Date("2020-10-01"),
    new Date("2020-11-01"),
    new Date("2020-12-01"),
    new Date("2021-01-01"),
    new Date("2021-02-01"),
    new Date("2021-03-01"),
    new Date("2021-04-01"),
    new Date("2021-05-01"),
    new Date("2021-06-01"),
    new Date("2021-07-01"),
    new Date("2021-08-01"),
    new Date("2021-09-01"),
    new Date("2021-10-01"),
    new Date("2021-11-01"),
    new Date("2021-12-01"),
    new Date("2022-01-01"),
    new Date("2022-02-01"),
    new Date("2022-03-01"),
    new Date("2022-04-01"),
    new Date("2022-05-01"),
    new Date("2022-06-01"),
    new Date("2022-07-01"),
    new Date("2022-08-01"),
    new Date("2022-09-01"),
    new Date("2022-10-01"),
    new Date("2022-11-01"),
    new Date("2022-12-01"),
    new Date("2023-01-01"),
    new Date("2023-02-01"),
    new Date("2023-03-01"),
    new Date("2023-04-01"),
    new Date("2023-05-01"),
    new Date("2023-06-01"),
    new Date("2023-07-01"),
    new Date("2023-08-01"),
    new Date("2023-09-01"),
    new Date("2023-10-01"),
    new Date("2023-11-01"),
    new Date("2023-12-01"),
    new Date("2024-01-01"),
    new Date("2024-02-01"),
    new Date("2024-03-01"),
    new Date("2024-04-01"),
    new Date("2024-05-01")],
    'xaxis': 'x',
    'y': [  5,   7,   6,   5,  13,  12, 642, 464, 420, 316, 301, 190, 204,  94,
                135, 164, 215, 199, 175, 254, 144,  93,  48,  66,  63,  60,  95,  75,
                121, 131, 102, 165,  97, 112, 104,  79,  74,  64,  83,  74,  85,  90,
                 95, 132, 115,  82,  56,  65,  97,  94,  64,  55,  76,  70,  69,  56,
                 52,  49,  43,  68,  87,  72,  52,  56,  77,  61,  38,  27,  25,  28,
                 22,  26,  28,  30,  33,  29,  58,  52,  44,  40,  32,  35,  46,  22,
                 41,  33,  25,  47,  36,  31,  28,  35,  42,  44,  39,  24,  32,  20,
                 37,  20,  12],
    'yaxis': 'y',
    'hovertemplate': rq2_customdata,
}]

peak_data = [{'month': 7, 'date': new Date('2016-07-01 00:00:00'), 'reports': 642, 'year': 2016},
                {'month': 8, 'date': new Date('2017-08-01 00:00:00'), 'reports': 254, 'year': 2017},
                {'month': 8, 'date': new Date('2018-08-01 00:00:00'), 'reports': 165, 'year': 2018},
                {'month': 8, 'date': new Date('2019-08-01 00:00:00'), 'reports': 132, 'year': 2019},
                {'month': 1, 'date': new Date('2020-01-01 00:00:00'), 'reports': 97, 'year': 2020},
                {'month': 1, 'date': new Date('2021-01-01 00:00:00'), 'reports': 87, 'year': 2021},
                {'month': 5, 'date': new Date('2022-05-01 00:00:00'), 'reports': 58, 'year': 2022},
                {'month': 4, 'date': new Date('2023-04-01 00:00:00'), 'reports': 47, 'year': 2023},
                {'month': 3, 'date': new Date('2024-03-01 00:00:00'), 'reports': 37, 'year': 2024}]
let rq2_shapes = []
let rq2_annotations = []
const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"];

for (let p of peak_data) {
    rq2_shapes.push({
        type: "line",
        x0: p['date'], y0: 0, x1: p['date'], y1: p['reports'],
        line: {        
            color: "#afd275",
            width: 2,
            dash: "dash"
            }
    });

    rq2_annotations.push({
        x :  p['date'],
        y :  p['reports'],
        text: `<b>${months[p['date'].getMonth()]}<br>${p['date'].getFullYear()}</b>`,
        // text :  `<b>{pd.to_datetime(x_date).strftime('%b<br>%Y')}</b>`,
        showarrow: true,
        arrowhead: 2,
        ax: 0,
        ay: -30,
    })
};


var rq2_layout = {
    autosize: true,
    // margin: {l: 0, r: 0, b: 0, t: 100},
    // width: 800,
    // height: 500,
    title: {
      text: "Aggregated Monthly Reports of Civilian Victimization with Peaks",
      'xanchor': 'center',
      'yanchor': 'top',
      y: 0.90,
      // automargin: true,
    },
    annotations: rq2_annotations,
    shapes: rq2_shapes,
  };

Plotly.newPlot('rq2-plot', rq2_data, rq2_layout, {responsive: true});
